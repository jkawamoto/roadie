<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <base href="https://jkawamoto.github.io/roadie/">

  
  <title>Queue</title>
  

  
  <meta name="author" content="Junpei Kawamoto"/>
  

  
  <meta name="description" content="This document explains about queue management system in Roadie."/>
  

  <meta property="og:type" content="article"/>
  
  <meta property="og:title" content="Queue: A easy way to run your program on Cloud Platform"/>
  

  
  <meta property="og:description" content="This document explains about queue management system in Roadie."/>
  

  
  <meta property="og:site_name"  content="Roadie: A easy way to run your program on Cloud Platform"/>
  
  
  <meta property="og:image" content="https://jkawamoto.github.io/roadie/img/banner.png"/>
  

  
    
    <meta name="twitter:card" content="This document explains about queue management system in Roadie."/>
    
  <meta name="twitter:site" content="@junkawamoto"/>
  

  
  
  <link rel="shortcut icon" type="image/x-icon" href="https://jkawamoto.github.io/roadie/img/favicon.ico"/>
  
  
  <link rel="icon" type="image/png" href="https://jkawamoto.github.io/roadie/img/icon_16.png" sizes="16x16"/>
  
  
  <link rel="icon" type="image/png" href="https://jkawamoto.github.io/roadie/img/icon_32.png" sizes="32x32"/>
  
  
  <link rel="icon" type="image/png" href="https://jkawamoto.github.io/roadie/img/icon_96.png" sizes="96x96"/>
  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">

  <!-- Bootstrap Core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet"/>

  <!-- Custom CSS -->
  <link href="css/landing-page.css" rel="stylesheet"/>

  <!-- Custom Fonts -->
  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

  <style>
    .navbar {
    border-color: #e7e7e7;
}

.content-section-a,
footer,
.navbar {
  background-color: #f8f8f8;
  color: #333;
}

.navbar a:link,
.navbar-default .navbar-nav>li>a {
  color: #777;
}

.navbar a:hover,
.navbar-default .navbar-nav>li>a:hover {
  color: rgb(51, 51, 51);
}

.content-section-b {
  background-color: white;
  color: #333;
}

body {
  color: rgb(51, 51, 51);
}

.header-container h1,
.header-container h2,
.header-container h3,
.header-container h4 {
  color: rgb(51, 51, 51);
}

  </style>
</head>

  <body>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4734862314145555",
        enable_page_level_ads: true
      });
    </script>
    
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="page-scroll navbar-brand" href="#intro">Roadie</a>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        
        <li><a class="page-scroll" href="https://github.com/jkawamoto/roadie">Github</a></li>
        
        
        <li><a class="page-scroll" href="./documents/top/">Docs</a></li>
        
        
        <li><a class="page-scroll" href="./ja/top/">ドキュメント</a></li>
        
        
        <li><a class="page-scroll" href="https://github.com/jkawamoto/roadie/releases">Release</a></li>
        
        <li>
        <a class="page-scroll" href=https://www.jkawamoto.info/>Junpei Kawamoto</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

    
<section id="services">
  <div class="content-section-a">
    <div class="container">
      <div class="row">
        <div>
          <hr class="section-heading-spacer">
          <div class="clearfix"></div>
          <h2 class="section-heading">Queue</h2>
          

<p>Roadie supports queue to keep a bunch of script.
Enqueued scripts are run sequentially by default,
but you can add instances working with the queue.</p>

<h3 id="add-new-script-to-a-queue">Add new script to a queue</h3>

<p>Enqueue a script to a queue, use <code>roadie run</code> command with <code>--queue</code> flag.
The <code>--queue</code> flag takes a queue name and the given script will be enqueued
the queue.
If there are such queues, it will be created.
If there are no instances working with the queue, one instance will be created.
The other flags in <code>roadie run</code> command are as same as the case of starting
script without queue.</p>

<h4 id="example">example</h4>

<pre><code class="language-shell">$ roadie run --local . --name instance-1 --queue queue-1 script.yml
</code></pre>

<p>The above command enqueues <code>script.yml</code> to a queue <code>queue-1</code>.
The script is named <code>instance-1</code> so that you can refer results and logs with the
name.</p>

<p>If there are no instances working with the queue, one instance will be created.</p>

<h3 id="queue-management">Queue management</h3>

<p>To find existing queues, use <code>roadie queue list</code> command.
On the other hand, to find enqueued scripts in a queue,
use</p>

<pre><code class="language-shell">$ roadie queue show &lt;queue name&gt;
</code></pre>

<p>If you want to stop executing a queue,</p>

<pre><code class="language-shell">$ roadie queue stop &lt;queue name&gt;
</code></pre>

<p>do it.
But scripts already running won&rsquo;t be stopped.
To restart stopped queue, use</p>

<pre><code class="language-shell">$ roadie queue restart &lt;queue name&gt;
</code></pre>

<p>It restarts the queue and creates one instance to handle scripts.</p>

<h3 id="instance-management">Instance management</h3>

<p>By default, scripts in a queue are handled by one instance.
You can add other instances to handle any queue.</p>

<pre><code class="language-shell">$ roadie queue instance add --instances N &lt;queue name&gt;
</code></pre>

<p>command adds <code>N</code>
instances to the given named queue. If you omit <code>--instances</code> flag,
just one instance will be added.
This command also support <code>--disk-size</code> flag as same as <code>roadie run</code> command.
You can modify disk size of instances according to your script.</p>

<pre><code class="language-shell">$ roadie queue instance list &lt;queue name&gt;
</code></pre>

<p>shows instances working with the given named queue.</p>

<h3 id="retrieve-logging-information">Retrieve logging information</h3>

<p>To retrieve logging information from tasks, use <code>roadie queue log</code> command
instead of <code>roadie log</code> command.</p>

<p>The following example shows all logging information from tasks in a queue:</p>

<pre><code class="language-shell">$ roadie queue log &lt;queue name&gt;
</code></pre>

<p>If you want to see logging information from a specific task, give the task name
, too:</p>

<pre><code class="language-shell">$ roadie queue log &lt;queue name&gt; &lt;task name&gt;
</code></pre>

        </div>
      </div>
    </div>
  </div>
</section>

    <!-- Footer -->
<footer>
  
<div class="container">
  <ins class="adsbygoogle"
      style="display:block"
       data-ad-client="ca-pub-4734862314145555"
       data-ad-slot="4875187824"
       data-ad-format="auto"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


  <div class="container">
    <div class="row">
      <div class="col-md-3">
        <h4>Repositories</h4>
        <ul class="small">
          <li><a href="https://github.com/jkawamoto/roadie">Roadie</a></li>
          <li><a href="https://github.com/jkawamoto/roadie-gcp">Roadie-GCP</a></li>
          <li><a href="https://github.com/jkawamoto/roadie-queue-manager">Roadie Queue Manager</a></li>
          <li><a href="https://github.com/jkawamoto/roadie-azure">Roadie Azure</a></li>
        </ul>
      </div>
      <div class="col-md-2">
        <h4>Resources</h4>
        <ul class="small">
          <li><a href="documents/blogs">Blog posts</a></li>
          <li><a href="ja/blogs/">ブログ</a></li>
          <li><a href="info/forum/">Forum</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <h4>Contacts</h4>
        <div class="addthis_inline_follow_toolbox"></div>
      </div>
      <div class="col-md-4">
        <p class="copyright text-muted small">
        Copyright &copy; Junpei Kawamoto All Rights Reserved.
        Built with <a href="http://gohugo.io">Hugo</a> and the
        <a href="https://github.com/swiftline/github-project-landing-page">Github project Page</a>
        theme,
        and the project icon is designed by <a href="http://www.digimadmedia.com/">Digimad Media</a>.
        </p>
      </div>
    </div>
  </div>
</footer>

    <!-- jQuery CDN -->
<script src="js/jquery-2.2.0.min.js"></script>

<!-- Plugin JavaScript -->
<script src="js/jquery.easing-1.3.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="js/landing-page.js"></script>


<!-- Google Analytics -->
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
   Date();a=s.createElement(o),
   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 ga('create', 'UA-82315630-1', 'auto');
 ga('send', 'pageview');
</script>



<!-- highlight.js Configuration -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/agate.min.css" type="text/css" />
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
<script>hljs.initHighlightingOnLoad();</script>



<!-- AddThis Configuration -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-57f529147128b1fb"></script>


  </body>
</html>
